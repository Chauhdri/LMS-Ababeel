{"ast":null,"code":"import _regeneratorRuntime from\"D:/Ababeel/LMS/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Ababeel/LMS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Ababeel/LMS/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Nav}from\"./components/dataLoader\";import{useAuthState}from\"react-firebase-hooks/auth\";import{auth,db,logout}from\"./components/firebaseServer\";import{query,collection,getDocs,where}from\"firebase/firestore\";import{useNavigate}from\"react-router-dom\";import{Grid,Box,Button}from\"@mui/material\";import StudentNotices from'./components/studentNotices';import{colorManager}from'./components/data';import{LogoAndName}from'./components/logoAndName';import{BottomBar}from'./components/bottomBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Students(){var _React$useState=React.useState(window.innerWidth),_React$useState2=_slicedToArray(_React$useState,2),w=_React$useState2[0],setW=_React$useState2[1];window.addEventListener('resize',function(event){setW(window.innerWidth);},true);var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,3),user=_useAuthState2[0],loading=_useAuthState2[1],error=_useAuthState2[2];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var navigate=useNavigate();var fetchUserName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var q,doc,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;q=query(collection(db,\"users\"),where(\"uid\",\"==\",user===null||user===void 0?void 0:user.uid));_context.next=4;return getDocs(q);case 4:doc=_context.sent;data=doc.docs[0].data();setName(data.name);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);alert(\"An error occured while fetching user data\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchUserName(){return _ref.apply(this,arguments);};}();useEffect(function(){if(loading)return;if(!user)return navigate(\"/\");fetchUserName();},[user,loading]);// return (\n//   <div className=\"dashboard\">\n//      <div className=\"dashboard__container\">\n//       Logged in as\n//        <div>{name}</div>\n//        <div>{user?.email}</div>\n//      </div>\n//    </div>\n// );\nreturn/*#__PURE__*/_jsxs(Box,{sx:{backgroundImage:\"url('./images/1 (10).jpg')\",backgroundSize:w},children:[/*#__PURE__*/_jsx(LogoAndName,{}),/*#__PURE__*/_jsx(StudentNotices,{}),/*#__PURE__*/_jsx(Button,{style:{marginBottom:220},onClick:logout,children:\"Logout\"}),/*#__PURE__*/_jsx(BottomBar,{name:name,email:user===null||user===void 0?void 0:user.email})]});}","map":{"version":3,"names":["React","useEffect","useState","Nav","useAuthState","auth","db","logout","query","collection","getDocs","where","useNavigate","Grid","Box","Button","StudentNotices","colorManager","LogoAndName","BottomBar","Students","window","innerWidth","w","setW","addEventListener","event","user","loading","error","name","setName","navigate","fetchUserName","q","uid","doc","data","docs","console","alert","backgroundImage","backgroundSize","marginBottom","email"],"sources":["D:/Ababeel/LMS/src/pages/teacheer.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Nav } from \"./components/dataLoader\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db, logout } from \"./components/firebaseServer\";\r\nimport { query, collection, getDocs, where } from \"firebase/firestore\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Grid, Box, Button } from \"@mui/material\";\r\nimport StudentNotices from './components/studentNotices';\r\nimport { colorManager } from './components/data';\r\nimport { LogoAndName } from './components/logoAndName';\r\nimport { BottomBar } from './components/bottomBar'\r\n\r\nexport default function Students() {\r\n\r\n  let [w, setW] = React.useState(window.innerWidth)\r\n  window.addEventListener('resize', function (event) { setW(window.innerWidth); }, true);\r\n\r\n  const [user, loading, error] = useAuthState(auth);\r\n  const [name, setName] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const fetchUserName = async () => {\r\n    try {\r\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\r\n      const doc = await getDocs(q);\r\n      const data = doc.docs[0].data();\r\n      setName(data.name);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"An error occured while fetching user data\");\r\n    } \r\n  };\r\n  useEffect(() => {\r\n    if (loading) return;\r\n    if (!user) return navigate(\"/\");\r\n    fetchUserName();\r\n  }, [user, loading]); \r\n\r\n  // return (\r\n  //   <div className=\"dashboard\">\r\n  //      <div className=\"dashboard__container\">\r\n  //       Logged in as\r\n  //        <div>{name}</div>\r\n  //        <div>{user?.email}</div>\r\n\r\n  //      </div>\r\n  //    </div>\r\n  // );\r\n\r\n  return (\r\n    <Box sx={{ backgroundImage: \"url('./images/1 (10).jpg')\", backgroundSize: w }}>\r\n      <LogoAndName />\r\n      \r\n      <StudentNotices />\r\n      <Button style={{\r\n        marginBottom:220\r\n      }}\r\n      onClick={logout}>\r\n        Logout\r\n      </Button>\r\n      <BottomBar name={name} email={user?.email} />\r\n     \r\n    </Box>\r\n  )\r\n}\r\n"],"mappings":"4TAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,GAAT,KAAoB,yBAApB,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,OAASC,IAAT,CAAeC,EAAf,CAAmBC,MAAnB,KAAiC,6BAAjC,CACA,OAASC,KAAT,CAAgBC,UAAhB,CAA4BC,OAA5B,CAAqCC,KAArC,KAAkD,oBAAlD,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,IAAT,CAAeC,GAAf,CAAoBC,MAApB,KAAkC,eAAlC,CACA,MAAOC,eAAP,KAA2B,6BAA3B,CACA,OAASC,YAAT,KAA6B,mBAA7B,CACA,OAASC,WAAT,KAA4B,0BAA5B,CACA,OAASC,SAAT,KAA0B,wBAA1B,C,wFAEA,cAAe,SAASC,SAAT,EAAoB,CAEjC,oBAAgBpB,KAAK,CAACE,QAAN,CAAemB,MAAM,CAACC,UAAtB,CAAhB,oDAAKC,CAAL,qBAAQC,IAAR,qBACAH,MAAM,CAACI,gBAAP,CAAwB,QAAxB,CAAkC,SAAUC,KAAV,CAAiB,CAAEF,IAAI,CAACH,MAAM,CAACC,UAAR,CAAJ,CAA0B,CAA/E,CAAiF,IAAjF,EAEA,kBAA+BlB,YAAY,CAACC,IAAD,CAA3C,gDAAOsB,IAAP,mBAAaC,OAAb,mBAAsBC,KAAtB,mBACA,cAAwB3B,QAAQ,CAAC,EAAD,CAAhC,wCAAO4B,IAAP,eAAaC,OAAb,eACA,GAAMC,SAAQ,CAAGpB,WAAW,EAA5B,CACA,GAAMqB,cAAa,4FAAG,oKAEZC,CAFY,CAER1B,KAAK,CAACC,UAAU,CAACH,EAAD,CAAK,OAAL,CAAX,CAA0BK,KAAK,CAAC,KAAD,CAAQ,IAAR,CAAcgB,IAAd,SAAcA,IAAd,iBAAcA,IAAI,CAAEQ,GAApB,CAA/B,CAFG,uBAGAzB,QAAO,CAACwB,CAAD,CAHP,QAGZE,GAHY,eAIZC,IAJY,CAILD,GAAG,CAACE,IAAJ,CAAS,CAAT,EAAYD,IAAZ,EAJK,CAKlBN,OAAO,CAACM,IAAI,CAACP,IAAN,CAAP,CALkB,+EAOlBS,OAAO,CAACV,KAAR,cACAW,KAAK,CAAC,2CAAD,CAAL,CARkB,oEAAH,kBAAbP,cAAa,0CAAnB,CAWAhC,SAAS,CAAC,UAAM,CACd,GAAI2B,OAAJ,CAAa,OACb,GAAI,CAACD,IAAL,CAAW,MAAOK,SAAQ,CAAC,GAAD,CAAf,CACXC,aAAa,GACd,CAJQ,CAIN,CAACN,IAAD,CAAOC,OAAP,CAJM,CAAT,CAMA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA,mBACE,MAAC,GAAD,EAAK,EAAE,CAAE,CAAEa,eAAe,CAAE,4BAAnB,CAAiDC,cAAc,CAAEnB,CAAjE,CAAT,wBACE,KAAC,WAAD,IADF,cAGE,KAAC,cAAD,IAHF,cAIE,KAAC,MAAD,EAAQ,KAAK,CAAE,CACboB,YAAY,CAAC,GADA,CAAf,CAGA,OAAO,CAAEpC,MAHT,oBAJF,cAUE,KAAC,SAAD,EAAW,IAAI,CAAEuB,IAAjB,CAAuB,KAAK,CAAEH,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEiB,KAApC,EAVF,GADF,CAeD"},"metadata":{},"sourceType":"module"}